<head>
    <title>TH Köln ARS</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
</head>

<body>
<div class="header container">
    <div class="row">
        <div class="col-sm-4"><img class="logoImg" src="/img/logo.png" alt="TH Köln logo"/></div>
        <div class="col-sm-8"><h1 class="title">Welcome to THK ARS!</h1></div>
    </div>
</div>
<div class="container content">
    <div class="row">
        <div class="col-sm-12">
            <h3 class="login">Login: {{> loginButtons }}</h3>
        </div>
        <div class="col-sm-12">
            {{#if sessionExist}}
                {{> sessionCreated}}
            {{else}}
                {{> default }}
            {{/if}}
        </div>

    </div>
</div>
</body>

<template name="default">
    <h2>Create a Session</h2>
    {{#if currentUser}}
        <div class="divider clearfix"></div>
        <button class="btnCreate">Create a Session</button>
    {{/if}}
    <div class="divider clearfix"></div>
    <form id="formJoin">
        <input id="btnJoin" type="text" name="sessionId" placeholder="Session ID"/>
        <button type="submit" class="btnJoin">Join a Session</button>
    </form>
</template>

<template name="sessionCreated">
    <h2>Session View</h2>
    {{#each session}}
        <p>SessionID: {{sessionId}}</p>

        <p>Owner: {{username}}</p>

        <p>Current User: {{#if currentUser}}{{currentUser.username}}{{else}}Anonymous{{/if}}</p>

        <p>Participants: {{participants}}</p>

        <p>Answers received: {{answersReceived}}</p>

        <div class="divider"></div>

        <div class="row">
            {{#if isOwner}}
                <div class="col-sm-6 col-xs-12">
                    <form id="formQuestion">
                        <select name="type">
                            <option value="YesNo">Yes/No-Question</option>
                            <option value="multi">Multiple Choice Question</option>
                        </select>
                        <input type="text" name="questionTxt">
                        <br/>
                        <button type="submit" class="btnAddQuestion">Add this question</button>
                    </form>
                </div>
                <div class="col-sm-6 col-xs-12">
                    <button type="submit" class="btnTerminate">Terminate Session</button>
                </div>

            {{else}}
                <div class="col-sm-12">
                    <button type="submit" class="btnLeave">Leave Session</button>
                </div>
            {{/if}}
        </div>
        <div class="divider clearfix"></div>

        <table border="1" class="questionsTable">
            <tr class="trHeader">
                <th>Question</th>
                {{#if isOwner}}
                    <th>Answers</th>
                    <th>Deletion</th>
                {{else}}
                    <th>Option</th>
                {{/if}}

            </tr>
            {{#each questions}}
                {{>questionTemplate}}
            {{/each}}
        </table>

        {{#unless isOwner}}
            <br/>
            <button type="button" id="btnSubmitAnswers">Submit answers</button>
        {{/unless}}
    {{/each}}
</template>

<template name="questionTemplate">
    <tr class="questionsRow">
        {{log this}}
        <td><span>{{question}}</span></td>
        {{#unless isOwner}}
            <td>
                <form class="formYesNoAnswer" data-questId="{{this._id}}">
                    <input type="radio" class="YesNoRadioButtons" name="yesNo" value="yes">Yes
                    <input type="radio" class="YesNoRadioButtons" name="yesNo" value="no">No
                </form>
            </td>
        {{/unless}}

        {{#if isOwner}}
            <td>
                <span class="pre">{{answers2}}</span>
            </td>
            <td>
                <button class="btnDelQuestion">Delete</button>
            </td>
        {{/if}}
    </tr>
</template>